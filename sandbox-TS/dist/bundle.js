(()=>{"use strict";class e{constructor(e,t,n,r){this.templateElement=document.getElementById(e),this.hostElement=document.getElementById(t);const s=document.importNode(this.templateElement.content,!0);this.element=s.firstElementChild,r&&(this.element.id=r),this.attach(n)}attach(e){this.hostElement.insertAdjacentElement(e?"afterbegin":"beforeend",this.element)}}function t(e){let t=!0;return e.required&&(t=t&&0!==e.value.toString().trim().length),void 0!==e.minLength&&"string"==typeof e.value&&(t=t&&e.value.toString().trim().length>=e.minLength),void 0!==e.maxLength&&"string"==typeof e.value&&(t=t&&e.value.toString().trim().length<=e.maxLength),null!=e.min&&"number"==typeof e.value&&(t=t&&e.value>=e.min),null!=e.max&&"number"==typeof e.value&&(t=t&&e.value<=e.max),t}function n(e,t,n){const r=n.value;return{configurable:!0,get(){return r.bind(this)}}}var r;!function(e){e[e.Active=0]="Active",e[e.Finished=1]="Finished"}(r||(r={}));class s{constructor(e,t,n,r,s){this.id=e,this.title=t,this.description=n,this.people=r,this.status=s}}class i{constructor(){this.listeners=[]}addListener(e){this.listeners.push(e)}}class o extends i{constructor(){super(),this.projects=[]}static getInstance(){return this.instance||(this.instance=new o),this.instance}addProject(e,t,n){const i=new s(Math.random().toString(),e,t,n,r.Active);this.projects.push(i),this.updateListeners()}moveProject(e,t){const n=this.projects.find((t=>t.id===e));n&&n.status!==t&&(n.status=t,this.updateListeners())}updateListeners(){for(const e of this.listeners)e(this.projects.slice())}}const a=o.getInstance();var l=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class d extends e{constructor(){super("project-input","app",!0,"user-input"),this.titleInputElement=this.element.querySelector("#title"),this.descriptionInputElement=this.element.querySelector("#description"),this.peopleInputElement=this.element.querySelector("#people"),this.configure()}configure(){this.element.addEventListener("submit",this.submitHandler)}renderContent(){}gatherUserInput(){const e=this.titleInputElement.value,n=this.descriptionInputElement.value,r=this.peopleInputElement.value,s={value:n,required:!0,minLength:5},i={value:+r,required:!0,min:1,max:8};if(t({value:e,required:!0})||t(s)||t(i))return[e,n,+r];alert("Invalid input")}clearInputs(){this.titleInputElement.value="",this.descriptionInputElement.value="",this.peopleInputElement.value=""}submitHandler(e){e.preventDefault();const t=this.gatherUserInput();if(Array.isArray(t)){const[e,n,r]=t;a.addProject(e,n,r),this.clearInputs()}}}!function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);i>3&&o&&Object.defineProperty(t,n,o)}([n,l("design:type",Function),l("design:paramtypes",[Event]),l("design:returntype",void 0)],d.prototype,"submitHandler",null);var c=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},p=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class u extends e{get persons(){return 1===this.project.people?"1 person":`${this.project.people} persons`}constructor(e,t){super("single-project",e+"-list",!1,t.id),this.hostId=e,this.project=t,this.configure(),this.renderContent()}configure(){this.element.addEventListener("dragstart",this.dragStartHandler),this.element.addEventListener("dragend",this.dragEndHandler)}renderContent(){this.element.querySelector("h2").textContent=this.project.title,this.element.querySelector("h3").textContent=this.persons+" assigned",this.element.querySelector("p").textContent=this.project.description}dragStartHandler(e){e.dataTransfer.setData("text/plain",this.project.id),e.dataTransfer.effectAllowed="move"}dragEndHandler(e){}}c([n,p("design:type",Function),p("design:paramtypes",[]),p("design:returntype",void 0)],u.prototype,"configure",null),c([n,p("design:type",Function),p("design:paramtypes",[]),p("design:returntype",void 0)],u.prototype,"renderContent",null),c([n,p("design:type",Function),p("design:paramtypes",[DragEvent]),p("design:returntype",void 0)],u.prototype,"dragStartHandler",null),c([n,p("design:type",Function),p("design:paramtypes",[DragEvent]),p("design:returntype",void 0)],u.prototype,"dragEndHandler",null);var h=function(e,t,n,r){var s,i=arguments.length,o=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,r);else for(var a=e.length-1;a>=0;a--)(s=e[a])&&(o=(i<3?s(o):i>3?s(t,n,o):s(t,n))||o);return i>3&&o&&Object.defineProperty(t,n,o),o},g=function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};class f extends e{constructor(e){super("project-list","app",!1,`${e}-projects`),this.type=e,this.assignedProjects=[],this.configure(),this.renderContent()}renderProjects(){document.getElementById(`${this.type}-projects-list`).innerHTML="";for(const e of this.assignedProjects)new u(this.element.id,e)}configure(){this.element.addEventListener("dragover",this.dragOverHandler),this.element.addEventListener("dragleave",this.dragLeaveHandler),this.element.addEventListener("drop",this.dropHandler),a.addListener((e=>{const t=e.filter((e=>"active"===this.type?e.status===r.Active:e.status===r.Finished));this.assignedProjects=t,this.renderProjects()}))}renderContent(){const e=`${this.type}-projects-list`;this.element.querySelector("ul").id=e,this.element.querySelector("h2").textContent=this.type.toUpperCase()+" PROJECTS"}dragOverHandler(e){e.dataTransfer&&"text/plain"===e.dataTransfer.types[0]&&(e.preventDefault(),this.element.querySelector("ul").classList.add("droppable"))}dragLeaveHandler(e){this.element.querySelector("ul").classList.remove("droppable")}dropHandler(e){const t=e.dataTransfer.getData("text/plain"),n="active"===this.type?r.Active:r.Finished;a.moveProject(t,n)}}h([n,g("design:type",Function),g("design:paramtypes",[DragEvent]),g("design:returntype",void 0)],f.prototype,"dragOverHandler",null),h([n,g("design:type",Function),g("design:paramtypes",[DragEvent]),g("design:returntype",void 0)],f.prototype,"dragLeaveHandler",null),h([n,g("design:type",Function),g("design:paramtypes",[DragEvent]),g("design:returntype",void 0)],f.prototype,"dropHandler",null),new d,new f("active"),new f("finished")})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYnVuZGxlLmpzIiwibWFwcGluZ3MiOiJtQkFDTyxNQUFlQSxFQUlyQkMsWUFDQ0MsRUFDQUMsRUFDQUMsRUFDQUMsR0FFQUMsS0FBS0MsZ0JBQWtCQyxTQUFTQyxlQUMvQlAsR0FFREksS0FBS0ksWUFBY0YsU0FBU0MsZUFBZU4sR0FFM0MsTUFBTVEsRUFBZUgsU0FBU0ksV0FDN0JOLEtBQUtDLGdCQUFnQk0sU0FDckIsR0FFRFAsS0FBS1EsUUFBVUgsRUFBYUksa0JBQ3hCVixJQUNIQyxLQUFLUSxRQUFRRSxHQUFLWCxHQUVuQkMsS0FBS1csT0FBT2IsRUFDYixDQUNRYSxPQUFPQyxHQUNkWixLQUFLSSxZQUFZUyxzQkFDaEJELEVBQW9CLGFBQWUsWUFDbkNaLEtBQUtRLFFBQ1AsRUNwQk0sU0FBU00sRUFBU0MsR0FDeEIsSUFBSUMsR0FBVSxFQXdCZCxPQXZCSUQsRUFBaUJFLFdBQ3BCRCxFQUFVQSxHQUErRCxJQUFwREQsRUFBaUJHLE1BQU1DLFdBQVdDLE9BQU9DLGFBRTVCQyxJQUEvQlAsRUFBaUJRLFdBQ2MsaUJBQTNCUixFQUFpQkcsUUFDeEJGLEVBQVVBLEdBQ1RELEVBQWlCRyxNQUFNQyxXQUFXQyxPQUFPQyxRQUFVTixFQUFpQlEsZ0JBRW5DRCxJQUEvQlAsRUFBaUJTLFdBQ2MsaUJBQTNCVCxFQUFpQkcsUUFDeEJGLEVBQVVBLEdBQ1RELEVBQWlCRyxNQUFNQyxXQUFXQyxPQUFPQyxRQUFVTixFQUFpQlMsV0FFMUNGLE1BQXhCUCxFQUFpQlUsS0FDaUIsaUJBQTNCVixFQUFpQkcsUUFDM0JGLEVBQVVBLEdBQ1RELEVBQWlCRyxPQUFTSCxFQUFpQlUsS0FFakJILE1BQXhCUCxFQUFpQlcsS0FDaUIsaUJBQTNCWCxFQUFpQkcsUUFDM0JGLEVBQVVBLEdBQ1RELEVBQWlCRyxPQUFTSCxFQUFpQlcsS0FFdENWLENBQ1IsQ0NsQ08sU0FBU1csRUFDZkMsRUFDQUMsRUFDQUMsR0FFQSxNQUFNQyxFQUFpQkQsRUFBV1osTUFRbEMsTUFQMEMsQ0FDekNjLGNBQWMsRUFDZEMsTUFFQyxPQURnQkYsRUFBZUcsS0FBS2xDLEtBRXJDLEVBR0YsQ0NkQSxJQUFZbUMsR0FBWixTQUFZQSxHQUFnQix1QkFBUSwwQkFBVSxDQUE5QyxDQUFZQSxJQUFBQSxFQUFhLEtBRWxCLE1BQU1DLEVBQ1p6QyxZQUNRZSxFQUNBMkIsRUFDQUMsRUFDQUMsRUFDQUMsR0FKQSxLQUFBOUIsR0FBQUEsRUFDQSxLQUFBMkIsTUFBQUEsRUFDQSxLQUFBQyxZQUFBQSxFQUNBLEtBQUFDLE9BQUFBLEVBQ0EsS0FBQUMsT0FBQUEsQ0FDSixFQ05MLE1BQU1DLEVBQU4sY0FDVyxLQUFBQyxVQUEyQixFQUt0QyxDQUhDQyxZQUFZQyxHQUNYNUMsS0FBSzBDLFVBQVVHLEtBQUtELEVBQ3JCLEVBS00sTUFBTUUsVUFBcUJMLEVBUWpDLGNBQ0NNLFFBUE8sS0FBQUMsU0FBc0IsRUFROUIsQ0FFQUMscUJBQ0MsT0FBSWpELEtBQUtrRCxXQUdUbEQsS0FBS2tELFNBQVcsSUFBSUosR0FGWjlDLEtBQUtrRCxRQUlkLENBRU9DLFdBQVdkLEVBQ2pCQyxFQUNBYyxHQUNBLE1BQU1DLEVBQWEsSUFBSWpCLEVBQVFrQixLQUFLQyxTQUFTcEMsV0FBWWtCLEVBQU9DLEVBQWFjLEVBQWFqQixFQUFjcUIsUUFDeEd4RCxLQUFLZ0QsU0FBU0gsS0FBS1EsR0FDbkJyRCxLQUFLeUQsaUJBQ04sQ0FFT0MsWUFBWUMsRUFBZUMsR0FDakMsTUFBTUMsRUFBZ0I3RCxLQUFLZ0QsU0FBU2MsTUFBS0MsR0FBT0EsRUFBSXJELEtBQU9pRCxJQUN2REUsR0FBaUJBLEVBQWNyQixTQUFXb0IsSUFDN0NDLEVBQWNyQixPQUFTb0IsRUFDdkI1RCxLQUFLeUQsa0JBRVAsQ0FFT0Esa0JBQ04sSUFBSyxNQUFNYixLQUFjNUMsS0FBSzBDLFVBQzdCRSxFQUFXNUMsS0FBS2dELFNBQVNnQixRQUUzQixFQUdNLE1BQU1DLEVBQWVuQixFQUFhb0IsYyxtSENyRGxDLE1BQU1DLFVBQXFCekUsRUFLakNDLGNBQ0NvRCxNQUFNLGdCQUFpQixPQUFPLEVBQU0sY0FFcEMvQyxLQUFLb0Usa0JBQW9CcEUsS0FBS1EsUUFBUTZELGNBQ3JDLFVBRURyRSxLQUFLc0Usd0JBQTBCdEUsS0FBS1EsUUFBUTZELGNBQzNDLGdCQUVEckUsS0FBS3VFLG1CQUFxQnZFLEtBQUtRLFFBQVE2RCxjQUN0QyxXQUdEckUsS0FBS3dFLFdBRU4sQ0FFQUEsWUFDQ3hFLEtBQUtRLFFBQVFpRSxpQkFBaUIsU0FBVXpFLEtBQUswRSxjQUM5QyxDQUVBQyxnQkFBd0IsQ0FFaEJDLGtCQUNQLE1BQU1DLEVBQWU3RSxLQUFLb0Usa0JBQWtCbEQsTUFDdEM0RCxFQUFxQjlFLEtBQUtzRSx3QkFBd0JwRCxNQUNsRDZELEVBQWdCL0UsS0FBS3VFLG1CQUFtQnJELE1BTXhDOEQsRUFBc0MsQ0FDM0M5RCxNQUFPNEQsRUFDUDdELFVBQVUsRUFDVk0sVUFBVyxHQUVOMEQsRUFBaUMsQ0FDdEMvRCxPQUFRNkQsRUFDUjlELFVBQVUsRUFDVlEsSUFBSyxFQUNMQyxJQUFLLEdBR04sR0FDRVosRUFqQm9DLENBQ3JDSSxNQUFPMkQsRUFDUDVELFVBQVUsS0FnQlRILEVBQVNrRSxJQUNUbEUsRUFBU21FLEdBS1YsTUFBTyxDQUFDSixFQUFjQyxHQUFxQkMsR0FIM0NHLE1BQU0sZ0JBS1IsQ0FFUUMsY0FDUG5GLEtBQUtvRSxrQkFBa0JsRCxNQUFRLEdBQy9CbEIsS0FBS3NFLHdCQUF3QnBELE1BQVEsR0FDckNsQixLQUFLdUUsbUJBQW1CckQsTUFBUSxFQUNqQyxDQUdRd0QsY0FBY1UsR0FDckJBLEVBQU1DLGlCQUNOLE1BQU1DLEVBQVl0RixLQUFLNEUsa0JBQ3ZCLEdBQUlXLE1BQU1DLFFBQVFGLEdBQVksQ0FDN0IsTUFBT2pELEVBQU9vRCxFQUFNbEQsR0FBVStDLEVBQzlCckIsRUFBYWQsV0FBV2QsRUFBT29ELEVBQU1sRCxHQUNyQ3ZDLEtBQUttRixhLENBRVAsRywwVEFUQSxFQUFDeEQsRSxpREFDNEIrRCxRLDBmQ25FdkIsTUFBTUMsVUFBb0JqRyxFQUs1QmtHLGNBQ0gsT0FBNEIsSUFBeEI1RixLQUFLNkYsUUFBUXRELE9BQ1QsV0FFQSxHQUFHdkMsS0FBSzZGLFFBQVF0RCxnQkFFekIsQ0FFQTVDLFlBQXNCbUcsRUFBZ0JELEdBQ3JDOUMsTUFBTSxpQkFBa0IrQyxFQUFTLFNBQVMsRUFBT0QsRUFBUW5GLElBRHBDLEtBQUFvRixPQUFBQSxFQUVyQjlGLEtBQUs2RixRQUFVQSxFQUVmN0YsS0FBS3dFLFlBQ0x4RSxLQUFLMkUsZUFDTixDQUdBSCxZQUNDeEUsS0FBS1EsUUFBUWlFLGlCQUFpQixZQUFhekUsS0FBSytGLGtCQUNoRC9GLEtBQUtRLFFBQVFpRSxpQkFBaUIsVUFBV3pFLEtBQUtnRyxlQUMvQyxDQUdBckIsZ0JBQ0MzRSxLQUFLUSxRQUFRNkQsY0FBYyxNQUFPNEIsWUFBY2pHLEtBQUs2RixRQUFReEQsTUFDN0RyQyxLQUFLUSxRQUFRNkQsY0FBYyxNQUFPNEIsWUFBY2pHLEtBQUs0RixRQUFVLFlBQy9ENUYsS0FBS1EsUUFBUTZELGNBQWMsS0FBTTRCLFlBQWNqRyxLQUFLNkYsUUFBUXZELFdBQzdELENBR0F5RCxpQkFBaUJYLEdBQ2hCQSxFQUFNYyxhQUFjQyxRQUFRLGFBQWNuRyxLQUFLNkYsUUFBUW5GLElBQ3ZEMEUsRUFBTWMsYUFBY0UsY0FBZ0IsTUFDckMsQ0FHQUosZUFBZVosR0FBMEIsRUFwQnpDLEdBQUN6RCxFLGlIQU1ELEdBQUNBLEUscUhBT0QsR0FBQ0EsRSxpREFDdUIwRSxZLG9FQUt4QixHQUFDMUUsRSxpREFDcUIwRSxZLDJmQ3ZDaEIsTUFBTUMsVUFBb0I1RyxFQUloQ0MsWUFBb0I0RyxHQUNuQnhELE1BQU0sZUFBZ0IsT0FBTyxFQUFPLEdBQUd3RCxjQURwQixLQUFBQSxLQUFBQSxFQUduQnZHLEtBQUt3RyxpQkFBbUIsR0FHeEJ4RyxLQUFLd0UsWUFDTHhFLEtBQUsyRSxlQUNOLENBRUE4QixpQkFDa0N2RyxTQUFTQyxlQUFlLEdBQUdILEtBQUt1RyxzQkFDMURHLFVBQVksR0FDbkIsSUFBSyxNQUFNQyxLQUFXM0csS0FBS3dHLGlCQUMxQixJQUFJYixFQUFZM0YsS0FBS1EsUUFBUUUsR0FBSWlHLEVBRW5DLENBRUFuQyxZQUNDeEUsS0FBS1EsUUFBUWlFLGlCQUFpQixXQUFZekUsS0FBSzRHLGlCQUMvQzVHLEtBQUtRLFFBQVFpRSxpQkFBaUIsWUFBYXpFLEtBQUs2RyxrQkFDaEQ3RyxLQUFLUSxRQUFRaUUsaUJBQWlCLE9BQVF6RSxLQUFLOEcsYUFDM0M3QyxFQUFhdEIsYUFBYUssSUFDekIsTUFBTStELEVBQW1CL0QsRUFBU2dFLFFBQU9qRCxHQUN0QixXQUFkL0QsS0FBS3VHLEtBQ0R4QyxFQUFJdkIsU0FBV0wsRUFBY3FCLE9BRTlCTyxFQUFJdkIsU0FBV0wsRUFBYzhFLFdBRXJDakgsS0FBS3dHLGlCQUFtQk8sRUFDeEIvRyxLQUFLeUcsZ0JBQWdCLEdBRXZCLENBRUE5QixnQkFDQyxNQUFNdUMsRUFBUyxHQUFHbEgsS0FBS3VHLHFCQUN2QnZHLEtBQUtRLFFBQVE2RCxjQUFjLE1BQU8zRCxHQUFLd0csRUFDdkNsSCxLQUFLUSxRQUFRNkQsY0FBYyxNQUFPNEIsWUFDakNqRyxLQUFLdUcsS0FBS1ksY0FBZ0IsV0FFNUIsQ0FHQVAsZ0JBQWdCeEIsR0FDWEEsRUFBTWMsY0FBZ0QsZUFBaENkLEVBQU1jLGFBQWFrQixNQUFNLEtBQ2xEaEMsRUFBTUMsaUJBQ1NyRixLQUFLUSxRQUFRNkQsY0FBYyxNQUNuQ2dELFVBQVVDLElBQUksYUFFdkIsQ0FHQVQsaUJBQWlCekIsR0FDRHBGLEtBQUtRLFFBQVE2RCxjQUFjLE1BQ25DZ0QsVUFBVUUsT0FBTyxZQUN6QixDQUdBVCxZQUFZMUIsR0FDWCxNQUFNekIsRUFBUXlCLEVBQU1jLGFBQWNzQixRQUFRLGNBQ3BDNUQsRUFBMEIsV0FBZDVELEtBQUt1RyxLQUFvQnBFLEVBQWNxQixPQUFTckIsRUFBYzhFLFNBQ2hGaEQsRUFBYVAsWUFBWUMsRUFBT0MsRUFDakMsRUFwQkEsR0FBQ2pDLEUsaURBQ3NCMEUsWSxtRUFRdkIsR0FBQzFFLEUsaURBQ3VCMEUsWSxvRUFLeEIsR0FBQzFFLEUsaURBQ2tCMEUsWSwrRENuRXBCLElBQUlsQyxFQUNKLElBQUltQyxFQUFZLFVBQ2hCLElBQUlBLEVBQVksVyIsInNvdXJjZXMiOlsid2VicGFjazovL3NhbmRib3gtdHMvLi9zcmMvY29tcG9uZW50cy9iYXNlLWNvbXBvbmVudC50cyIsIndlYnBhY2s6Ly9zYW5kYm94LXRzLy4vc3JjL3V0aWwvdmFsaWRhdGlvbi50cyIsIndlYnBhY2s6Ly9zYW5kYm94LXRzLy4vc3JjL2RlY29yYXRvcnMvYXV0b2JpbmQudHMiLCJ3ZWJwYWNrOi8vc2FuZGJveC10cy8uL3NyYy9pbnRlcmZhY2VzL3Byb2plY3QudHMiLCJ3ZWJwYWNrOi8vc2FuZGJveC10cy8uL3NyYy9zdGF0ZS9wcm9qZWN0U3RhdGUudHMiLCJ3ZWJwYWNrOi8vc2FuZGJveC10cy8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtaW5wdXQudHMiLCJ3ZWJwYWNrOi8vc2FuZGJveC10cy8uL3NyYy9jb21wb25lbnRzL3Byb2plY3QtaXRlbS50cyIsIndlYnBhY2s6Ly9zYW5kYm94LXRzLy4vc3JjL2NvbXBvbmVudHMvcHJvamVjdC1saXN0LnRzIiwid2VicGFjazovL3NhbmRib3gtdHMvLi9zcmMvaW5kZXgudHMiXSwic291cmNlc0NvbnRlbnQiOlsiXHJcbmV4cG9ydCBhYnN0cmFjdCBjbGFzcyBDb21wb25lbnQ8VCBleHRlbmRzIEhUTUxFbGVtZW50LCBVIGV4dGVuZHMgSFRNTEVsZW1lbnQ+IHtcclxuXHR0ZW1wbGF0ZUVsZW1lbnQ6IEhUTUxUZW1wbGF0ZUVsZW1lbnQ7XHJcblx0aG9zdEVsZW1lbnQ6IFQ7XHJcblx0ZWxlbWVudDogVTtcclxuXHRjb25zdHJ1Y3RvcihcclxuXHRcdHRlbXBsYXRlSWQ6IHN0cmluZyxcclxuXHRcdGhvc3RFbGVtZW50SWQ6IHN0cmluZyxcclxuXHRcdGluc2VydEF0U3RhcnQ6IGJvb2xlYW4sXHJcblx0XHRuZXdFbGVtZW50SWQ/OiBzdHJpbmcpIHtcclxuXHJcblx0XHR0aGlzLnRlbXBsYXRlRWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFxyXG5cdFx0XHR0ZW1wbGF0ZUlkXHJcblx0XHQpISBhcyBIVE1MVGVtcGxhdGVFbGVtZW50O1xyXG5cdFx0dGhpcy5ob3N0RWxlbWVudCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKGhvc3RFbGVtZW50SWQpISBhcyBUO1xyXG5cclxuXHRcdGNvbnN0IGltcG9ydGVkTm9kZSA9IGRvY3VtZW50LmltcG9ydE5vZGUoXHJcblx0XHRcdHRoaXMudGVtcGxhdGVFbGVtZW50LmNvbnRlbnQsXHJcblx0XHRcdHRydWVcclxuXHRcdCk7XHJcblx0XHR0aGlzLmVsZW1lbnQgPSBpbXBvcnRlZE5vZGUuZmlyc3RFbGVtZW50Q2hpbGQgYXMgVTtcclxuXHRcdGlmIChuZXdFbGVtZW50SWQpIHtcclxuXHRcdFx0dGhpcy5lbGVtZW50LmlkID0gbmV3RWxlbWVudElkO1xyXG5cdFx0fVxyXG5cdFx0dGhpcy5hdHRhY2goaW5zZXJ0QXRTdGFydCk7XHJcblx0fVxyXG5cdHByaXZhdGUgYXR0YWNoKGluc2VydEF0QmVnaW5uaW5nOiBib29sZWFuKSB7XHJcblx0XHR0aGlzLmhvc3RFbGVtZW50Lmluc2VydEFkamFjZW50RWxlbWVudChcclxuXHRcdFx0aW5zZXJ0QXRCZWdpbm5pbmcgPyAnYWZ0ZXJiZWdpbicgOiAnYmVmb3JlZW5kJyxcclxuXHRcdFx0dGhpcy5lbGVtZW50KTtcclxuXHR9XHJcblx0YWJzdHJhY3QgY29uZmlndXJlPygpOiB2b2lkO1xyXG5cdGFic3RyYWN0IHJlbmRlckNvbnRlbnQoKTogdm9pZDtcclxufVxyXG4iLCJcclxuZXhwb3J0IGludGVyZmFjZSBWYWxpZGF0YWJsZSB7XHJcblx0dmFsdWU6IHN0cmluZyB8IG51bWJlcjtcclxuXHRyZXF1aXJlZD86IGJvb2xlYW47XHJcblx0bWluTGVuZ3RoPzogbnVtYmVyO1xyXG5cdG1heExlbmd0aD86IG51bWJlcjtcclxuXHRtaW4/OiBudW1iZXI7XHJcblx0bWF4PzogbnVtYmVyO1xyXG59XHJcblxyXG5leHBvcnQgZnVuY3Rpb24gdmFsaWRhdGUoVmFsaWRhdGFibGVJbnB1dDogVmFsaWRhdGFibGUpOiBib29sZWFuIHtcclxuXHRsZXQgaXNWYWxpZCA9IHRydWU7XHJcblx0aWYgKFZhbGlkYXRhYmxlSW5wdXQucmVxdWlyZWQpIHtcclxuXHRcdGlzVmFsaWQgPSBpc1ZhbGlkICYmIFZhbGlkYXRhYmxlSW5wdXQudmFsdWUudG9TdHJpbmcoKS50cmltKCkubGVuZ3RoICE9PSAwO1xyXG5cdH1cclxuXHRpZiAoVmFsaWRhdGFibGVJbnB1dC5taW5MZW5ndGggIT09IHVuZGVmaW5lZCAmJlxyXG5cdFx0dHlwZW9mIFZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdzdHJpbmcnKSB7XHJcblx0XHRpc1ZhbGlkID0gaXNWYWxpZCAmJlxyXG5cdFx0XHRWYWxpZGF0YWJsZUlucHV0LnZhbHVlLnRvU3RyaW5nKCkudHJpbSgpLmxlbmd0aCA+PSBWYWxpZGF0YWJsZUlucHV0Lm1pbkxlbmd0aDtcclxuXHR9XHJcblx0aWYgKFZhbGlkYXRhYmxlSW5wdXQubWF4TGVuZ3RoICE9PSB1bmRlZmluZWQgJiZcclxuXHRcdHR5cGVvZiBWYWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnc3RyaW5nJykge1xyXG5cdFx0aXNWYWxpZCA9IGlzVmFsaWQgJiZcclxuXHRcdFx0VmFsaWRhdGFibGVJbnB1dC52YWx1ZS50b1N0cmluZygpLnRyaW0oKS5sZW5ndGggPD0gVmFsaWRhdGFibGVJbnB1dC5tYXhMZW5ndGg7XHJcblx0fVxyXG5cdGlmIChWYWxpZGF0YWJsZUlucHV0Lm1pbiAhPSB1bmRlZmluZWRcclxuXHRcdCYmIHR5cGVvZiBWYWxpZGF0YWJsZUlucHV0LnZhbHVlID09PSAnbnVtYmVyJykge1xyXG5cdFx0aXNWYWxpZCA9IGlzVmFsaWQgJiZcclxuXHRcdFx0VmFsaWRhdGFibGVJbnB1dC52YWx1ZSA+PSBWYWxpZGF0YWJsZUlucHV0Lm1pbjtcclxuXHR9XHJcblx0aWYgKFZhbGlkYXRhYmxlSW5wdXQubWF4ICE9IHVuZGVmaW5lZFxyXG5cdFx0JiYgdHlwZW9mIFZhbGlkYXRhYmxlSW5wdXQudmFsdWUgPT09ICdudW1iZXInKSB7XHJcblx0XHRpc1ZhbGlkID0gaXNWYWxpZCAmJlxyXG5cdFx0XHRWYWxpZGF0YWJsZUlucHV0LnZhbHVlIDw9IFZhbGlkYXRhYmxlSW5wdXQubWF4O1xyXG5cdH1cclxuXHRyZXR1cm4gaXNWYWxpZDtcclxufVxyXG4iLCJcclxuXHJcbmV4cG9ydCBmdW5jdGlvbiBhdXRvYmluZChcclxuXHRfOiBhbnksXHJcblx0XzI6IHN0cmluZyxcclxuXHRkZXNjcmlwdG9yOiBUeXBlZFByb3BlcnR5RGVzY3JpcHRvcjxhbnk+XHJcbikge1xyXG5cdGNvbnN0IG9yaWdpbmFsTWV0aG9kID0gZGVzY3JpcHRvci52YWx1ZTtcclxuXHRjb25zdCBhZGpEZXNjcmlwdG9yOiBQcm9wZXJ0eURlc2NyaXB0b3IgPSB7XHJcblx0XHRjb25maWd1cmFibGU6IHRydWUsXHJcblx0XHRnZXQoKSB7XHJcblx0XHRcdGNvbnN0IGJvdW5kRm4gPSBvcmlnaW5hbE1ldGhvZC5iaW5kKHRoaXMpO1xyXG5cdFx0XHRyZXR1cm4gYm91bmRGbjtcclxuXHRcdH1cclxuXHR9O1xyXG5cdHJldHVybiBhZGpEZXNjcmlwdG9yO1xyXG59XHJcbiIsIlxyXG5cclxuZXhwb3J0IGVudW0gUHJvamVjdFN0YXR1cyB7IEFjdGl2ZSwgRmluaXNoZWQgfVxyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3Qge1xyXG5cdGNvbnN0cnVjdG9yKFxyXG5cdFx0cHVibGljIGlkOiBzdHJpbmcsXHJcblx0XHRwdWJsaWMgdGl0bGU6IHN0cmluZyxcclxuXHRcdHB1YmxpYyBkZXNjcmlwdGlvbjogc3RyaW5nLFxyXG5cdFx0cHVibGljIHBlb3BsZTogbnVtYmVyLFxyXG5cdFx0cHVibGljIHN0YXR1czogUHJvamVjdFN0YXR1c1xyXG5cdCkgeyB9XHJcbn1cclxuIiwiaW1wb3J0IHsgUHJvamVjdCB9IGZyb20gJy4uL2ludGVyZmFjZXMvcHJvamVjdCc7XHJcbmltcG9ydCB7IFByb2plY3RTdGF0dXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3Byb2plY3QnO1xyXG5cclxudHlwZSBMaXN0ZW5lcjxUPiA9IChpdGVtczogVFtdKSA9PiB2b2lkO1xyXG5cclxuY2xhc3MgU3RhdGU8VD4ge1xyXG5cdHByb3RlY3RlZCBsaXN0ZW5lcnM6IExpc3RlbmVyPFQ+W10gPSBbXTtcclxuXHJcblx0YWRkTGlzdGVuZXIobGlzdGVuZXJGbjogTGlzdGVuZXI8VD4pIHtcclxuXHRcdHRoaXMubGlzdGVuZXJzLnB1c2gobGlzdGVuZXJGbik7XHJcblx0fVxyXG59XHJcblxyXG4vLyBQcm9qZWN0IFN0YXRlIE1hbmFnZW1lbnQgY2xhc3NcclxuLy8gc2luZ2xldG9uXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0U3RhdGUgZXh0ZW5kcyBTdGF0ZTxQcm9qZWN0PiB7XHJcblxyXG5cdHByaXZhdGUgcHJvamVjdHM6IFByb2plY3RbXSA9IFtcclxuXHRcdC8vIGxpc3Qgb2YgcHJvamVjdHMgaGVyZVxyXG5cdF1cclxuXHJcblx0cHJpdmF0ZSBzdGF0aWMgaW5zdGFuY2U6IFByb2plY3RTdGF0ZTtcclxuXHJcblx0cHJpdmF0ZSBjb25zdHJ1Y3RvcigpIHtcclxuXHRcdHN1cGVyKCk7XHJcblx0fVxyXG5cclxuXHRzdGF0aWMgZ2V0SW5zdGFuY2UoKSB7XHJcblx0XHRpZiAodGhpcy5pbnN0YW5jZSkge1xyXG5cdFx0XHRyZXR1cm4gdGhpcy5pbnN0YW5jZTtcclxuXHRcdH1cclxuXHRcdHRoaXMuaW5zdGFuY2UgPSBuZXcgUHJvamVjdFN0YXRlO1xyXG5cdFx0cmV0dXJuIHRoaXMuaW5zdGFuY2U7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgYWRkUHJvamVjdCh0aXRsZTogc3RyaW5nLFxyXG5cdFx0ZGVzY3JpcHRpb246IHN0cmluZyxcclxuXHRcdG51bU9mUGVvcGxlOiBudW1iZXIpIHtcclxuXHRcdGNvbnN0IG5ld1Byb2plY3QgPSBuZXcgUHJvamVjdChNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKCksIHRpdGxlLCBkZXNjcmlwdGlvbiwgbnVtT2ZQZW9wbGUsIFByb2plY3RTdGF0dXMuQWN0aXZlKTtcclxuXHRcdHRoaXMucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcclxuXHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgbW92ZVByb2plY3QocHJqSWQ6IHN0cmluZywgbmV3U3RhdHVzOiBQcm9qZWN0U3RhdHVzKSB7XHJcblx0XHRjb25zdCB0YXJnZXRQcm9qZWN0ID0gdGhpcy5wcm9qZWN0cy5maW5kKHByaiA9PiBwcmouaWQgPT09IHByaklkKTtcclxuXHRcdGlmICh0YXJnZXRQcm9qZWN0ICYmIHRhcmdldFByb2plY3Quc3RhdHVzICE9PSBuZXdTdGF0dXMpIHtcclxuXHRcdFx0dGFyZ2V0UHJvamVjdC5zdGF0dXMgPSBuZXdTdGF0dXM7XHJcblx0XHRcdHRoaXMudXBkYXRlTGlzdGVuZXJzKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHRwdWJsaWMgdXBkYXRlTGlzdGVuZXJzKCkge1xyXG5cdFx0Zm9yIChjb25zdCBsaXN0ZW5lckZuIG9mIHRoaXMubGlzdGVuZXJzKSB7XHJcblx0XHRcdGxpc3RlbmVyRm4odGhpcy5wcm9qZWN0cy5zbGljZSgpKTtcclxuXHRcdH1cclxuXHR9XHJcbn1cclxuXHJcbmV4cG9ydCBjb25zdCBwcm9qZWN0U3RhdGUgPSBQcm9qZWN0U3RhdGUuZ2V0SW5zdGFuY2UoKTtcclxuIiwiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnLi9iYXNlLWNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFZhbGlkYXRhYmxlLCB2YWxpZGF0ZSB9IGZyb20gJy4uL3V0aWwvdmFsaWRhdGlvbic7XHJcbmltcG9ydCB7IGF1dG9iaW5kIH0gZnJvbSAnLi4vZGVjb3JhdG9ycy9hdXRvYmluZCc7XHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3RTdGF0ZSc7XHJcblxyXG5leHBvcnQgY2xhc3MgUHJvamVjdElucHV0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRm9ybUVsZW1lbnQ+e1xyXG5cdHRpdGxlSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdGRlc2NyaXB0aW9uSW5wdXRFbGVtZW50OiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cdHBlb3BsZUlucHV0RWxlbWVudDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoKSB7XHJcblx0XHRzdXBlcigncHJvamVjdC1pbnB1dCcsICdhcHAnLCB0cnVlLCAndXNlci1pbnB1dCcpO1xyXG5cclxuXHRcdHRoaXMudGl0bGVJbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0JyN0aXRsZSdcclxuXHRcdCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcihcclxuXHRcdFx0JyNkZXNjcmlwdGlvbidcclxuXHRcdCkgYXMgSFRNTElucHV0RWxlbWVudDtcclxuXHRcdHRoaXMucGVvcGxlSW5wdXRFbGVtZW50ID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXHJcblx0XHRcdCcjcGVvcGxlJ1xyXG5cdFx0KSBhcyBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRcdHRoaXMuY29uZmlndXJlKCk7XHJcblxyXG5cdH1cclxuXHJcblx0Y29uZmlndXJlKCkge1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIHRoaXMuc3VibWl0SGFuZGxlcik7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJDb250ZW50KCk6IHZvaWQgeyB9XHJcblxyXG5cdHByaXZhdGUgZ2F0aGVyVXNlcklucHV0KCk6IFtzdHJpbmcsIHN0cmluZywgbnVtYmVyXSB8IHZvaWQge1xyXG5cdFx0Y29uc3QgZW50ZXJlZFRpdGxlID0gdGhpcy50aXRsZUlucHV0RWxlbWVudC52YWx1ZTtcclxuXHRcdGNvbnN0IGVudGVyZWREZXNjcmlwdGlvbiA9IHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWU7XHJcblx0XHRjb25zdCBlbnRlcmVkUGVvcGxlID0gdGhpcy5wZW9wbGVJbnB1dEVsZW1lbnQudmFsdWU7XHJcblxyXG5cdFx0Y29uc3QgdGl0bGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcblx0XHRcdHZhbHVlOiBlbnRlcmVkVGl0bGUsXHJcblx0XHRcdHJlcXVpcmVkOiB0cnVlXHJcblx0XHR9O1xyXG5cdFx0Y29uc3QgZGVzY3JpcHRpb25WYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcblx0XHRcdHZhbHVlOiBlbnRlcmVkRGVzY3JpcHRpb24sXHJcblx0XHRcdHJlcXVpcmVkOiB0cnVlLFxyXG5cdFx0XHRtaW5MZW5ndGg6IDVcclxuXHRcdH07XHJcblx0XHRjb25zdCBwZW9wbGVWYWxpZGF0YWJsZTogVmFsaWRhdGFibGUgPSB7XHJcblx0XHRcdHZhbHVlOiArZW50ZXJlZFBlb3BsZSxcclxuXHRcdFx0cmVxdWlyZWQ6IHRydWUsXHJcblx0XHRcdG1pbjogMSxcclxuXHRcdFx0bWF4OiA4XHJcblx0XHR9O1xyXG5cclxuXHRcdGlmIChcclxuXHRcdFx0IXZhbGlkYXRlKHRpdGxlVmFsaWRhdGFibGUpICYmXHJcblx0XHRcdCF2YWxpZGF0ZShkZXNjcmlwdGlvblZhbGlkYXRhYmxlKSAmJlxyXG5cdFx0XHQhdmFsaWRhdGUocGVvcGxlVmFsaWRhdGFibGUpXHJcblx0XHQpIHtcclxuXHRcdFx0YWxlcnQoJ0ludmFsaWQgaW5wdXQnKTtcclxuXHRcdFx0Ly8gcmV0dXJuO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIFtlbnRlcmVkVGl0bGUsIGVudGVyZWREZXNjcmlwdGlvbiwgK2VudGVyZWRQZW9wbGVdO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0cHJpdmF0ZSBjbGVhcklucHV0cygpOiB2b2lkIHtcclxuXHRcdHRoaXMudGl0bGVJbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcclxuXHRcdHRoaXMuZGVzY3JpcHRpb25JbnB1dEVsZW1lbnQudmFsdWUgPSAnJztcclxuXHRcdHRoaXMucGVvcGxlSW5wdXRFbGVtZW50LnZhbHVlID0gJyc7XHJcblx0fVxyXG5cclxuXHRAYXV0b2JpbmRcclxuXHRwcml2YXRlIHN1Ym1pdEhhbmRsZXIoZXZlbnQ6IEV2ZW50KSB7XHJcblx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG5cdFx0Y29uc3QgdXNlcklucHV0ID0gdGhpcy5nYXRoZXJVc2VySW5wdXQoKTtcclxuXHRcdGlmIChBcnJheS5pc0FycmF5KHVzZXJJbnB1dCkpIHtcclxuXHRcdFx0Y29uc3QgW3RpdGxlLCBkZXNjLCBwZW9wbGVdID0gdXNlcklucHV0O1xyXG5cdFx0XHRwcm9qZWN0U3RhdGUuYWRkUHJvamVjdCh0aXRsZSwgZGVzYywgcGVvcGxlKTtcclxuXHRcdFx0dGhpcy5jbGVhcklucHV0cygpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCJcclxuaW1wb3J0IHsgRHJhZ2FibGUgfSBmcm9tICcuLi9pbnRlcmZhY2VzL0RyYWdEcm9wSW50ZXJmYWNlcyc7XHJcbmltcG9ydCB7IENvbXBvbmVudCB9IGZyb20gJy4vYmFzZS1jb21wb25lbnQnO1xyXG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9wcm9qZWN0JztcclxuaW1wb3J0IHsgYXV0b2JpbmQgfSBmcm9tICcuLi9kZWNvcmF0b3JzL2F1dG9iaW5kJztcclxuXHJcbmV4cG9ydCBjbGFzcyBQcm9qZWN0SXRlbSBleHRlbmRzIENvbXBvbmVudDxIVE1MVUxpc3RFbGVtZW50LCBIVE1MTElFbGVtZW50PlxyXG5cdGltcGxlbWVudHMgRHJhZ2FibGUge1xyXG5cclxuXHRwcml2YXRlIHByb2plY3Q6IFByb2plY3Q7XHJcblxyXG5cdGdldCBwZXJzb25zKCk6IHN0cmluZyB7XHJcblx0XHRpZiAodGhpcy5wcm9qZWN0LnBlb3BsZSA9PT0gMSkge1xyXG5cdFx0XHRyZXR1cm4gJzEgcGVyc29uJ1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0cmV0dXJuIGAke3RoaXMucHJvamVjdC5wZW9wbGV9IHBlcnNvbnNgO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0Y29uc3RydWN0b3IocHJvdGVjdGVkIGhvc3RJZDogc3RyaW5nLCBwcm9qZWN0OiBQcm9qZWN0KSB7XHJcblx0XHRzdXBlcignc2luZ2xlLXByb2plY3QnLCBob3N0SWQgKyAnLWxpc3QnLCBmYWxzZSwgcHJvamVjdC5pZCk7XHJcblx0XHR0aGlzLnByb2plY3QgPSBwcm9qZWN0O1xyXG5cclxuXHRcdHRoaXMuY29uZmlndXJlKCk7XHJcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuXHR9XHJcblxyXG5cdEBhdXRvYmluZFxyXG5cdGNvbmZpZ3VyZSgpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnc3RhcnQnLCB0aGlzLmRyYWdTdGFydEhhbmRsZXIpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2RyYWdlbmQnLCB0aGlzLmRyYWdFbmRIYW5kbGVyKTtcclxuXHR9XHJcblxyXG5cdEBhdXRvYmluZFxyXG5cdHJlbmRlckNvbnRlbnQoKTogdm9pZCB7XHJcblx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDInKSEudGV4dENvbnRlbnQgPSB0aGlzLnByb2plY3QudGl0bGU7XHJcblx0XHR0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcignaDMnKSEudGV4dENvbnRlbnQgPSB0aGlzLnBlcnNvbnMgKyAnIGFzc2lnbmVkJztcclxuXHRcdHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yKCdwJykhLnRleHRDb250ZW50ID0gdGhpcy5wcm9qZWN0LmRlc2NyaXB0aW9uO1xyXG5cdH1cclxuXHJcblx0QGF1dG9iaW5kXHJcblx0ZHJhZ1N0YXJ0SGFuZGxlcihldmVudDogRHJhZ0V2ZW50KTogdm9pZCB7XHJcblx0XHRldmVudC5kYXRhVHJhbnNmZXIhLnNldERhdGEoJ3RleHQvcGxhaW4nLCB0aGlzLnByb2plY3QuaWQpO1xyXG5cdFx0ZXZlbnQuZGF0YVRyYW5zZmVyIS5lZmZlY3RBbGxvd2VkID0gJ21vdmUnO1xyXG5cdH1cclxuXHJcblx0QGF1dG9iaW5kXHJcblx0ZHJhZ0VuZEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQgeyB9XHJcblxyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3QgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3Byb2plY3QnO1xyXG5pbXBvcnQgeyBEcmFnVGFyZ2V0IH0gZnJvbSAnLi4vaW50ZXJmYWNlcy9EcmFnRHJvcEludGVyZmFjZXMnO1xyXG5pbXBvcnQgeyBDb21wb25lbnQgfSBmcm9tICcuL2Jhc2UtY29tcG9uZW50JztcclxuaW1wb3J0IHsgUHJvamVjdEl0ZW0gfSBmcm9tICcuL3Byb2plY3QtaXRlbSc7XHJcbmltcG9ydCB7IHByb2plY3RTdGF0ZSB9IGZyb20gJy4uL3N0YXRlL3Byb2plY3RTdGF0ZSc7XHJcbmltcG9ydCB7IFByb2plY3RTdGF0dXMgfSBmcm9tICcuLi9pbnRlcmZhY2VzL3Byb2plY3QnO1xyXG5pbXBvcnQgeyBhdXRvYmluZCB9IGZyb20gJy4uL2RlY29yYXRvcnMvYXV0b2JpbmQnO1xyXG5cclxuZXhwb3J0IGNsYXNzIFByb2plY3RMaXN0IGV4dGVuZHMgQ29tcG9uZW50PEhUTUxEaXZFbGVtZW50LCBIVE1MRWxlbWVudD5cclxuXHRpbXBsZW1lbnRzIERyYWdUYXJnZXQge1xyXG5cdGFzc2lnbmVkUHJvamVjdHM6IFByb2plY3RbXTtcclxuXHJcblx0Y29uc3RydWN0b3IocHJpdmF0ZSB0eXBlOiAnYWN0aXZlJyB8ICdmaW5pc2hlZCcpIHtcclxuXHRcdHN1cGVyKCdwcm9qZWN0LWxpc3QnLCAnYXBwJywgZmFsc2UsIGAke3R5cGV9LXByb2plY3RzYCk7XHJcblxyXG5cdFx0dGhpcy5hc3NpZ25lZFByb2plY3RzID0gW107XHJcblxyXG5cclxuXHRcdHRoaXMuY29uZmlndXJlKCk7XHJcblx0XHR0aGlzLnJlbmRlckNvbnRlbnQoKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclByb2plY3RzKCkge1xyXG5cdFx0Y29uc3QgbGlzdEVsID0gPEhUTUxVTGlzdEVsZW1lbnQ+ZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoYCR7dGhpcy50eXBlfS1wcm9qZWN0cy1saXN0YCkhO1xyXG5cdFx0bGlzdEVsLmlubmVySFRNTCA9ICcnO1xyXG5cdFx0Zm9yIChjb25zdCBwcmpJdGVtIG9mIHRoaXMuYXNzaWduZWRQcm9qZWN0cykge1xyXG5cdFx0XHRuZXcgUHJvamVjdEl0ZW0odGhpcy5lbGVtZW50LmlkLCBwcmpJdGVtKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdGNvbmZpZ3VyZSgpIHtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnb3ZlcicsIHRoaXMuZHJhZ092ZXJIYW5kbGVyKTtcclxuXHRcdHRoaXMuZWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdkcmFnbGVhdmUnLCB0aGlzLmRyYWdMZWF2ZUhhbmRsZXIpO1xyXG5cdFx0dGhpcy5lbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2Ryb3AnLCB0aGlzLmRyb3BIYW5kbGVyKTtcclxuXHRcdHByb2plY3RTdGF0ZS5hZGRMaXN0ZW5lcigocHJvamVjdHM6IFByb2plY3RbXSkgPT4ge1xyXG5cdFx0XHRjb25zdCByZWxldmFudFByb2plY3RzID0gcHJvamVjdHMuZmlsdGVyKHByaiA9PiB7XHJcblx0XHRcdFx0aWYgKHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScpIHtcclxuXHRcdFx0XHRcdHJldHVybiBwcmouc3RhdHVzID09PSBQcm9qZWN0U3RhdHVzLkFjdGl2ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHByai5zdGF0dXMgPT09IFByb2plY3RTdGF0dXMuRmluaXNoZWQ7XHJcblx0XHRcdH0pO1xyXG5cdFx0XHR0aGlzLmFzc2lnbmVkUHJvamVjdHMgPSByZWxldmFudFByb2plY3RzO1xyXG5cdFx0XHR0aGlzLnJlbmRlclByb2plY3RzKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHJlbmRlckNvbnRlbnQoKSB7XHJcblx0XHRjb25zdCBsaXN0SWQgPSBgJHt0aGlzLnR5cGV9LXByb2plY3RzLWxpc3RgO1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhLmlkID0gbGlzdElkO1xyXG5cdFx0dGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ2gyJykhLnRleHRDb250ZW50ID1cclxuXHRcdFx0dGhpcy50eXBlLnRvVXBwZXJDYXNlKCkgKyAnIFBST0pFQ1RTJztcclxuXHJcblx0fVxyXG5cclxuXHRAYXV0b2JpbmRcclxuXHRkcmFnT3ZlckhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG5cdFx0aWYgKGV2ZW50LmRhdGFUcmFuc2ZlciAmJiBldmVudC5kYXRhVHJhbnNmZXIudHlwZXNbMF0gPT09ICd0ZXh0L3BsYWluJykge1xyXG5cdFx0XHRldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBhbGxvdyBkcm9wcGluZ1xyXG5cdFx0XHRjb25zdCBsaXN0RWwgPSB0aGlzLmVsZW1lbnQucXVlcnlTZWxlY3RvcigndWwnKSE7XHJcblx0XHRcdGxpc3RFbC5jbGFzc0xpc3QuYWRkKCdkcm9wcGFibGUnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdEBhdXRvYmluZFxyXG5cdGRyYWdMZWF2ZUhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgbGlzdEVsID0gdGhpcy5lbGVtZW50LnF1ZXJ5U2VsZWN0b3IoJ3VsJykhO1xyXG5cdFx0bGlzdEVsLmNsYXNzTGlzdC5yZW1vdmUoJ2Ryb3BwYWJsZScpO1xyXG5cdH1cclxuXHJcblx0QGF1dG9iaW5kXHJcblx0ZHJvcEhhbmRsZXIoZXZlbnQ6IERyYWdFdmVudCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcHJqSWQgPSBldmVudC5kYXRhVHJhbnNmZXIhLmdldERhdGEoJ3RleHQvcGxhaW4nKTtcclxuXHRcdGNvbnN0IG5ld1N0YXR1cyA9IHRoaXMudHlwZSA9PT0gJ2FjdGl2ZScgPyBQcm9qZWN0U3RhdHVzLkFjdGl2ZSA6IFByb2plY3RTdGF0dXMuRmluaXNoZWQ7XHJcblx0XHRwcm9qZWN0U3RhdGUubW92ZVByb2plY3QocHJqSWQsIG5ld1N0YXR1cyk7XHJcblx0fVxyXG59XHJcbiIsImltcG9ydCB7IFByb2plY3RJbnB1dCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWlucHV0J1xyXG5pbXBvcnQgeyBQcm9qZWN0TGlzdCB9IGZyb20gJy4vY29tcG9uZW50cy9wcm9qZWN0LWxpc3QnO1xyXG5cclxubmV3IFByb2plY3RJbnB1dCgpO1xyXG5uZXcgUHJvamVjdExpc3QoJ2FjdGl2ZScpO1xyXG5uZXcgUHJvamVjdExpc3QoJ2ZpbmlzaGVkJyk7XHJcblxyXG4iXSwibmFtZXMiOlsiQ29tcG9uZW50IiwiY29uc3RydWN0b3IiLCJ0ZW1wbGF0ZUlkIiwiaG9zdEVsZW1lbnRJZCIsImluc2VydEF0U3RhcnQiLCJuZXdFbGVtZW50SWQiLCJ0aGlzIiwidGVtcGxhdGVFbGVtZW50IiwiZG9jdW1lbnQiLCJnZXRFbGVtZW50QnlJZCIsImhvc3RFbGVtZW50IiwiaW1wb3J0ZWROb2RlIiwiaW1wb3J0Tm9kZSIsImNvbnRlbnQiLCJlbGVtZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpZCIsImF0dGFjaCIsImluc2VydEF0QmVnaW5uaW5nIiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwidmFsaWRhdGUiLCJWYWxpZGF0YWJsZUlucHV0IiwiaXNWYWxpZCIsInJlcXVpcmVkIiwidmFsdWUiLCJ0b1N0cmluZyIsInRyaW0iLCJsZW5ndGgiLCJ1bmRlZmluZWQiLCJtaW5MZW5ndGgiLCJtYXhMZW5ndGgiLCJtaW4iLCJtYXgiLCJhdXRvYmluZCIsIl8iLCJfMiIsImRlc2NyaXB0b3IiLCJvcmlnaW5hbE1ldGhvZCIsImNvbmZpZ3VyYWJsZSIsImdldCIsImJpbmQiLCJQcm9qZWN0U3RhdHVzIiwiUHJvamVjdCIsInRpdGxlIiwiZGVzY3JpcHRpb24iLCJwZW9wbGUiLCJzdGF0dXMiLCJTdGF0ZSIsImxpc3RlbmVycyIsImFkZExpc3RlbmVyIiwibGlzdGVuZXJGbiIsInB1c2giLCJQcm9qZWN0U3RhdGUiLCJzdXBlciIsInByb2plY3RzIiwic3RhdGljIiwiaW5zdGFuY2UiLCJhZGRQcm9qZWN0IiwibnVtT2ZQZW9wbGUiLCJuZXdQcm9qZWN0IiwiTWF0aCIsInJhbmRvbSIsIkFjdGl2ZSIsInVwZGF0ZUxpc3RlbmVycyIsIm1vdmVQcm9qZWN0IiwicHJqSWQiLCJuZXdTdGF0dXMiLCJ0YXJnZXRQcm9qZWN0IiwiZmluZCIsInByaiIsInNsaWNlIiwicHJvamVjdFN0YXRlIiwiZ2V0SW5zdGFuY2UiLCJQcm9qZWN0SW5wdXQiLCJ0aXRsZUlucHV0RWxlbWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJkZXNjcmlwdGlvbklucHV0RWxlbWVudCIsInBlb3BsZUlucHV0RWxlbWVudCIsImNvbmZpZ3VyZSIsImFkZEV2ZW50TGlzdGVuZXIiLCJzdWJtaXRIYW5kbGVyIiwicmVuZGVyQ29udGVudCIsImdhdGhlclVzZXJJbnB1dCIsImVudGVyZWRUaXRsZSIsImVudGVyZWREZXNjcmlwdGlvbiIsImVudGVyZWRQZW9wbGUiLCJkZXNjcmlwdGlvblZhbGlkYXRhYmxlIiwicGVvcGxlVmFsaWRhdGFibGUiLCJhbGVydCIsImNsZWFySW5wdXRzIiwiZXZlbnQiLCJwcmV2ZW50RGVmYXVsdCIsInVzZXJJbnB1dCIsIkFycmF5IiwiaXNBcnJheSIsImRlc2MiLCJFdmVudCIsIlByb2plY3RJdGVtIiwicGVyc29ucyIsInByb2plY3QiLCJob3N0SWQiLCJkcmFnU3RhcnRIYW5kbGVyIiwiZHJhZ0VuZEhhbmRsZXIiLCJ0ZXh0Q29udGVudCIsImRhdGFUcmFuc2ZlciIsInNldERhdGEiLCJlZmZlY3RBbGxvd2VkIiwiRHJhZ0V2ZW50IiwiUHJvamVjdExpc3QiLCJ0eXBlIiwiYXNzaWduZWRQcm9qZWN0cyIsInJlbmRlclByb2plY3RzIiwiaW5uZXJIVE1MIiwicHJqSXRlbSIsImRyYWdPdmVySGFuZGxlciIsImRyYWdMZWF2ZUhhbmRsZXIiLCJkcm9wSGFuZGxlciIsInJlbGV2YW50UHJvamVjdHMiLCJmaWx0ZXIiLCJGaW5pc2hlZCIsImxpc3RJZCIsInRvVXBwZXJDYXNlIiwidHlwZXMiLCJjbGFzc0xpc3QiLCJhZGQiLCJyZW1vdmUiLCJnZXREYXRhIl0sInNvdXJjZVJvb3QiOiIifQ==